---
import Layout from '../layouts/Layout.astro'; 
import SearchBar from '../components/react/SearchBar';
import AnimeList from '../components/common/AnimeList.astro';
import { getCurrentSeasonAnime, getTopAnime } from '../api/animeApi';


const currentSeasonResponse = await getCurrentSeasonAnime(1, 5);
const currentSeasonAnime = currentSeasonResponse.data;

const topAnimeResponse = await getTopAnime(1, 5);
const topAnime = topAnimeResponse.data;
---

<Layout 
  title="AnimeYuk - Discover Your Next Favorite Anime"
  description="Explore current season anime, top-rated series, and discover your next favorite anime with AnimeYuk."
>
  <section class="py-20 text-center">
    <h1 class="mb-6 text-5xl font-extrabold tracking-tight text-gray-900 dark:text-white md:text-6xl">
      Jelajahi <span class="text-blue-600 dark:text-blue-500">Anime</span>
    </h1>
    
    <p class="mx-auto mb-10 max-w-2xl text-lg text-gray-600 dark:text-gray-400">
      Jelajahi ribuan anime, temukan favorit baru, dan pantau serial yang sedang tayang musim ini dengan mudah.
    </p>
    
    <div class="mx-auto max-w-md">
      <SearchBar client:load />
    </div>
  </section>

  <section class="mb-20">
    <div class="mb-8 flex items-end justify-between border-b border-gray-200 pb-4 dark:border-gray-800">
      <div>
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white md:text-3xl">
          Current Season
        </h2>
        <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Anime yang sedang tayang saat ini</p>
      </div>
      
      <a 
        href="/anime/season" 
        class="group flex items-center gap-1 text-sm font-medium text-blue-600 transition-colors hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"
      >
        Lihat Semua
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform group-hover:translate-x-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>
    </div>
    
    <AnimeList animes={currentSeasonAnime} loading="eager" />
  </section>

  <section class="mb-20">
    <div class="mb-8 flex items-end justify-between border-b border-gray-200 pb-4 dark:border-gray-800">
      <div>
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white md:text-3xl">
          Top Anime
        </h2>
        <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Anime dengan rating tertinggi sepanjang masa</p>
      </div>
      
      <a 
        href="/anime/top" 
        class="group flex items-center gap-1 text-sm font-medium text-blue-600 transition-colors hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"
      >
        Lihat Semua
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform group-hover:translate-x-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>
    </div>
    
    <AnimeList animes={topAnime} />
  </section>

  <section class="mb-16 grid grid-cols-1 gap-6 md:grid-cols-3">
    <a 
      href="/anime/top" 
      class="group rounded-xl border border-gray-200 bg-white p-6 transition-all hover:border-blue-400 hover:shadow-sm dark:border-gray-800 dark:bg-gray-900 dark:hover:border-blue-500"
    >
      <div class="mb-4 inline-flex h-12 w-12 items-center justify-center rounded-lg bg-yellow-100 text-2xl dark:bg-yellow-900/30">
        üèÜ
      </div>
      <h3 class="mb-2 text-lg font-bold text-gray-900 transition-colors group-hover:text-blue-600 dark:text-white dark:group-hover:text-blue-400">
        Top Charts
      </h3>
      <p class="text-sm text-gray-600 dark:text-gray-400">
        Lihat daftar anime terbaik berdasarkan rating komunitas global.
      </p>
    </a>
    
    <a 
      href="/search" 
      class="group rounded-xl border border-gray-200 bg-white p-6 transition-all hover:border-blue-400 hover:shadow-sm dark:border-gray-800 dark:bg-gray-900 dark:hover:border-blue-500"
    >
      <div class="mb-4 inline-flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100 text-2xl dark:bg-blue-900/30">
        üîç
      </div>
      <h3 class="mb-2 text-lg font-bold text-gray-900 transition-colors group-hover:text-blue-600 dark:text-white dark:group-hover:text-blue-400">
        Advanced Search
      </h3>
      <p class="text-sm text-gray-600 dark:text-gray-400">
        Cari anime spesifik dengan filter genre, tahun, dan status tayang.
      </p>
    </a>
    
    <a 
      href="/genre/1" 
      class="group rounded-xl border border-gray-200 bg-white p-6 transition-all hover:border-blue-400 hover:shadow-sm dark:border-gray-800 dark:bg-gray-900 dark:hover:border-blue-500"
    >
      <div class="mb-4 inline-flex h-12 w-12 items-center justify-center rounded-lg bg-purple-100 text-2xl dark:bg-purple-900/30">
        üé≠
      </div>
      <h3 class="mb-2 text-lg font-bold text-gray-900 transition-colors group-hover:text-blue-600 dark:text-white dark:group-hover:text-blue-400">
        Browse Genres
      </h3>
      <p class="text-sm text-gray-600 dark:text-gray-400">
        Temukan anime berdasarkan mood kamu, dari Action hingga Slice of Life.
      </p>
    </a>
  </section>
</Layout>